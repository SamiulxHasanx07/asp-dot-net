@using Helpers
@model IEnumerable<Models.Product>
@{
    ViewData["Title"] = "Mango Shop";
}

@{
    var cart = Context.Session.GetObjectFromJson<Models.Cart>("Cart") ?? new Models.Cart();
    var cartCount = cart.Items.Sum(i => i.Quantity);
    var user = Context.Session.GetString("User");
}

<section class="hero-banner mb-5">
    <div class="p-5 text-center bg-warning rounded-3 shadow"
        style="background: linear-gradient(90deg, #ffe066 60%, #fffbe6 100%);">
        <img src="https://cdn.pixabay.com/photo/2023/09/29/07/58/mango-8283268_1280.jpg" alt="Mangoes" class="mb-3"
            style="max-width:180px; border-radius:1rem; box-shadow:0 2px 12px rgba(0,0,0,0.08);" />
        <h1 class="display-4 fw-bold mb-2">Welcome to Mango Shop!</h1>
        <p class="lead mb-3">Buy the freshest, juiciest mangoes online. Fast delivery, best prices!</p>
        <a href="#products" class="btn btn-lg btn-success shadow">Shop Now</a>
    </div>
</section>
<!-- Features section -->
<section class="container mb-5">
    <div class="row text-center">
        <div class="col-md-4 mb-4">
            <div class="card bg-dark text-warning shadow h-100">
                <div class="card-body">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="mb-3"
                        viewBox="0 0 16 16">
                        <path
                            d="M0 1.5A.5.5 0 0 1 .5 1h10a.5.5 0 0 1 .5.5V3h2.5A1.5 1.5 0 0 1 15 4.5V7h-1v1h1v2.5a.5.5 0 0 1-.5.5H14v1a2 2 0 1 1-4 0v-1H2v1a2 2 0 1 1-4 0v-1H.5a.5.5 0 0 1-.5-.5V1.5zm1 0V7h10V1.5H1zm13 3H11V7h3V4.5zm-3 4v1h3v-1h-3zm-8 1v1a1 1 0 1 0 2 0v-1H2zm8 0v1a1 1 0 1 0 2 0v-1h-2z" />
                    </svg>
                    <h5 class="card-title">Fast Delivery</h5>
                    <p class="card-text">Get your mangoes delivered fresh to your doorstep, anywhere in Bangladesh.
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card bg-dark text-warning shadow h-100">
                <div class="card-body">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="mb-3"
                        viewBox="0 0 16 16">
                        <path
                            d="M9.669.864 8 0 6.331.864a.5.5 0 0 0-.252.555l.3 1.2a.5.5 0 0 0 .485.381h1.272a.5.5 0 0 0 .485-.381l.3-1.2a.5.5 0 0 0-.252-.555zM8 2.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11zm0 10A4.5 4.5 0 1 1 8 3a4.5 4.5 0 0 1 0 9zm2.5-4.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0zm-2.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" />
                    </svg>
                    <h5 class="card-title">Premium Quality</h5>
                    <p class="card-text">We source only the best mangoes, handpicked for taste and ripeness.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card bg-dark text-warning shadow h-100">
                <div class="card-body">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="mb-3"
                        viewBox="0 0 16 16">
                        <path
                            d="M2 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l6.414 6.414a1 1 0 0 1 0 1.414l-6.414 6.414a1 1 0 0 1-1.414 0L2.293 9.707A1 1 0 0 1 2 9V3a1 1 0 0 1 1-1zm1 1v6.586l6.293 6.293a1 1 0 0 0 1.414 0l6.293-6.293A1 1 0 0 0 15 9V3a1 1 0 0 0-1-1H3zm1 1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1z" />
                    </svg>
                    <h5 class="card-title">Best Price</h5>
                    <p class="card-text">Enjoy competitive prices and exclusive offers all season long.</p>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="container">


    <div class="row justify-content-center">
        @foreach (var product in Model)
        {
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow-sm">
                    <img src="@product.ImageUrl" class="card-img-top" alt="@product.Name"
                        style="height:220px;object-fit:cover;background:#f8f9fa;">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">@product.Name</h5>
                        <p class="card-text">@product.Description</p>
                        <p class="card-text mb-2"><strong>Price:</strong> ৳@product.Price</p>
                        <form method="post" action="/Home/AddToCart" class="mt-auto">
                            <input type="hidden" name="id" value="@product.Id" />
                            <button type="submit" class="btn btn-warning w-100">Add to Cart</button>
                        </form>
                    </div>
                </div>
            </div>
        }
    </div>

</div>


@if (TempData["Message"] != null)
{
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            Swal.fire({
                icon: 'success',
                title: 'Added to Cart',
                text: '@TempData["Message"]',
                confirmButtonColor: '#ffc107',
                timer: 2000
            });
        });
    </script>
}
